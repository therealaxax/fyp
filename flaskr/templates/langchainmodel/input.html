{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Query Input{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form method="post">
    <label for="query">Query</label>
    <input name="query" id="query" required>
    <input type="submit" value="Query">
  </form>
  <div class="separatingelement"></div>
  <h1>Recently Queried</h1>

  <script>
    window.onload = function() {
      var query = "{{data.query}}";
      var response = "{{data.response}}"
      if(query != "empty" && response != "empty") {
          addQueryAndResponseToTable(query, response);
      }
      // addQueryAndResponseToTable(query, response);
    };

    function addQueryAndResponseToTable(query, response) {
        var table = document.getElementById('responseTable');
        var newRow = table.insertRow(-1);
        var queryCell = newRow.insertCell(0);
        var responseCell = newRow.insertCell(1);
        var queryText = document.createTextNode(query)
        var responseText = document.createTextNode(response)
        queryCell.appendChild(queryText);
        responseCell.appendChild(responseText);
    }
  </script>

  <table id="responseTable">
    <tr>
      <th>Query</th>
      <th>Response</th>
  </tr>
  </table>
{% endblock %}